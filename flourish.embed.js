window.Flourish={external:true};/*!
Copyright 2016-2025 Kiln Enterprises Ltd

This file may be freely used, and distributed without modification.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE
OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED
OF THE POSSIBILITY OF SUCH DAMAGE.
*/
window.FlourishConfig={app_url:"https://app.flourish.studio",public_url:"https://public.flourish.studio/",embeds_url:"https://flo.uri.sh/"},function(){"use strict";var t=!1;function e(e){if(t&&window.top!==window.self){var o=window;"srcdoc"===o.location.pathname&&(o=o.parent);var i,r=(i={},window._Flourish_template_id&&(i.template_id=window._Flourish_template_id),window.Flourish&&window.Flourish.app&&window.Flourish.app.loaded_template_id&&(i.template_id=window.Flourish.app.loaded_template_id),window._Flourish_visualisation_id&&(i.visualisation_id=window._Flourish_visualisation_id),window.Flourish&&window.Flourish.app&&window.Flourish.app.loaded_visualisation&&(i.visualisation_id=window.Flourish.app.loaded_visualisation.id),window.Flourish&&window.Flourish.app&&window.Flourish.app.story&&(i.story_id=window.Flourish.app.story.id,i.slide_count=window.Flourish.app.story.slides.length),window.Flourish&&window.Flourish.app&&window.Flourish.app.current_slide&&(i.slide_index=window.Flourish.app.current_slide.index+1),i),n={sender:"Flourish",method:"customerAnalytics"};for(var a in r)r.hasOwnProperty(a)&&(n[a]=r[a]);for(var a in e)e.hasOwnProperty(a)&&(n[a]=e[a]);o.parent.postMessage(JSON.stringify(n),"*")}}function o(t){if("function"!=typeof t)throw new Error("Analytics callback is not a function");window.Flourish._analytics_listeners.push(t)}function i(t){if("function"!=typeof t)throw new Error("Analytics callback is not a function");window.Flourish._analytics_listeners=window.Flourish._analytics_listeners.filter((function(e){return t!==e}))}function r(){t=!0;[{event_name:"click",action_name:"click",use_capture:!0},{event_name:"keydown",action_name:"key_down",use_capture:!0},{event_name:"mouseenter",action_name:"mouse_enter",use_capture:!1},{event_name:"mouseleave",action_name:"mouse_leave",use_capture:!1}].forEach((function(t){document.body.addEventListener(t.event_name,(function(){e({action:t.action_name})}),t.use_capture)}))}
/*! @license DOMPurify 3.2.4 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.4/LICENSE */const{entries:n,setPrototypeOf:a,isFrozen:s,getPrototypeOf:l,getOwnPropertyDescriptor:u}=Object;let{freeze:c,seal:d,create:p}=Object,{apply:h,construct:m}="undefined"!=typeof Reflect&&Reflect;c||(c=function(t){return t}),d||(d=function(t){return t}),h||(h=function(t,e,o){return t.apply(e,o)}),m||(m=function(t,e){return new t(...e)});const f=k(Array.prototype.forEach),g=k(Array.prototype.lastIndexOf),w=k(Array.prototype.pop),y=k(Array.prototype.push),b=k(Array.prototype.splice),v=k(String.prototype.toLowerCase),_=k(String.prototype.toString),A=k(String.prototype.match),x=k(String.prototype.replace),T=k(String.prototype.indexOf),E=k(String.prototype.trim),S=k(Object.prototype.hasOwnProperty),F=k(RegExp.prototype.test),N=(C=TypeError,function(){for(var t=arguments.length,e=new Array(t),o=0;o<t;o++)e[o]=arguments[o];return m(C,e)});var C;function k(t){return function(e){for(var o=arguments.length,i=new Array(o>1?o-1:0),r=1;r<o;r++)i[r-1]=arguments[r];return h(t,e,i)}}function L(t,e){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:v;a&&a(t,null);let i=e.length;for(;i--;){let r=e[i];if("string"==typeof r){const t=o(r);t!==r&&(s(e)||(e[i]=t),r=t)}t[r]=!0}return t}function O(t){for(let e=0;e<t.length;e++){S(t,e)||(t[e]=null)}return t}function R(t){const e=p(null);for(const[o,i]of n(t)){S(t,o)&&(Array.isArray(i)?e[o]=O(i):i&&"object"==typeof i&&i.constructor===Object?e[o]=R(i):e[o]=i)}return e}function I(t,e){for(;null!==t;){const o=u(t,e);if(o){if(o.get)return k(o.get);if("function"==typeof o.value)return k(o.value)}t=l(t)}return function(){return null}}const D=c(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),M=c(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),z=c(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),U=c(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),P=c(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),H=c(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),B=c(["#text"]),W=c(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),G=c(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),q=c(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),j=c(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Y=d(/\{\{[\w\W]*|[\w\W]*\}\}/gm),$=d(/<%[\w\W]*|[\w\W]*%>/gm),X=d(/\$\{[\w\W]*/gm),K=d(/^data-[\-\w.\u00B7-\uFFFF]+$/),J=d(/^aria-[\-\w]+$/),V=d(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Z=d(/^(?:\w+script|data):/i),Q=d(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),tt=d(/^html$/i),et=d(/^[a-z][.\w]*(-[.\w]+)+$/i);var ot=Object.freeze({__proto__:null,ARIA_ATTR:J,ATTR_WHITESPACE:Q,CUSTOM_ELEMENT:et,DATA_ATTR:K,DOCTYPE_NAME:tt,ERB_EXPR:$,IS_ALLOWED_URI:V,IS_SCRIPT_OR_DATA:Z,MUSTACHE_EXPR:Y,TMPLIT_EXPR:X});const it=1,rt=3,nt=7,at=8,st=9,lt=function(){return"undefined"==typeof window?null:window},ut=function(t,e){if("object"!=typeof t||"function"!=typeof t.createPolicy)return null;let o=null;const i="data-tt-policy-suffix";e&&e.hasAttribute(i)&&(o=e.getAttribute(i));const r="dompurify"+(o?"#"+o:"");try{return t.createPolicy(r,{createHTML:t=>t,createScriptURL:t=>t})}catch(t){return console.warn("TrustedTypes policy "+r+" could not be created."),null}};var ct,dt,pt=function t(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lt();const o=e=>t(e);if(o.version="3.2.4",o.removed=[],!e||!e.document||e.document.nodeType!==st||!e.Element)return o.isSupported=!1,o;let{document:i}=e;const r=i,a=r.currentScript,{DocumentFragment:s,HTMLTemplateElement:l,Node:u,Element:d,NodeFilter:h,NamedNodeMap:m=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:C,DOMParser:k,trustedTypes:O}=e,Y=d.prototype,$=I(Y,"cloneNode"),X=I(Y,"remove"),K=I(Y,"nextSibling"),J=I(Y,"childNodes"),Z=I(Y,"parentNode");if("function"==typeof l){const t=i.createElement("template");t.content&&t.content.ownerDocument&&(i=t.content.ownerDocument)}let Q,et="";const{implementation:ct,createNodeIterator:dt,createDocumentFragment:pt,getElementsByTagName:ht}=i,{importNode:mt}=r;let ft={afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]};o.isSupported="function"==typeof n&&"function"==typeof Z&&ct&&void 0!==ct.createHTMLDocument;const{MUSTACHE_EXPR:gt,ERB_EXPR:wt,TMPLIT_EXPR:yt,DATA_ATTR:bt,ARIA_ATTR:vt,IS_SCRIPT_OR_DATA:_t,ATTR_WHITESPACE:At,CUSTOM_ELEMENT:xt}=ot;let{IS_ALLOWED_URI:Tt}=ot,Et=null;const St=L({},[...D,...M,...z,...P,...B]);let Ft=null;const Nt=L({},[...W,...G,...q,...j]);let Ct=Object.seal(p(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),kt=null,Lt=null,Ot=!0,Rt=!0,It=!1,Dt=!0,Mt=!1,zt=!0,Ut=!1,Pt=!1,Ht=!1,Bt=!1,Wt=!1,Gt=!1,qt=!0,jt=!1;const Yt="user-content-";let $t=!0,Xt=!1,Kt={},Jt=null;const Vt=L({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Zt=null;const Qt=L({},["audio","video","img","source","image","track"]);let te=null;const ee=L({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),oe="http://www.w3.org/1998/Math/MathML",ie="http://www.w3.org/2000/svg",re="http://www.w3.org/1999/xhtml";let ne=re,ae=!1,se=null;const le=L({},[oe,ie,re],_);let ue=L({},["mi","mo","mn","ms","mtext"]),ce=L({},["annotation-xml"]);const de=L({},["title","style","font","a","script"]);let pe=null;const he=["application/xhtml+xml","text/html"],me="text/html";let fe=null,ge=null;const we=i.createElement("form"),ye=function(t){return t instanceof RegExp||t instanceof Function},be=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!ge||ge!==t){if(t&&"object"==typeof t||(t={}),t=R(t),pe=-1===he.indexOf(t.PARSER_MEDIA_TYPE)?me:t.PARSER_MEDIA_TYPE,fe="application/xhtml+xml"===pe?_:v,Et=S(t,"ALLOWED_TAGS")?L({},t.ALLOWED_TAGS,fe):St,Ft=S(t,"ALLOWED_ATTR")?L({},t.ALLOWED_ATTR,fe):Nt,se=S(t,"ALLOWED_NAMESPACES")?L({},t.ALLOWED_NAMESPACES,_):le,te=S(t,"ADD_URI_SAFE_ATTR")?L(R(ee),t.ADD_URI_SAFE_ATTR,fe):ee,Zt=S(t,"ADD_DATA_URI_TAGS")?L(R(Qt),t.ADD_DATA_URI_TAGS,fe):Qt,Jt=S(t,"FORBID_CONTENTS")?L({},t.FORBID_CONTENTS,fe):Vt,kt=S(t,"FORBID_TAGS")?L({},t.FORBID_TAGS,fe):{},Lt=S(t,"FORBID_ATTR")?L({},t.FORBID_ATTR,fe):{},Kt=!!S(t,"USE_PROFILES")&&t.USE_PROFILES,Ot=!1!==t.ALLOW_ARIA_ATTR,Rt=!1!==t.ALLOW_DATA_ATTR,It=t.ALLOW_UNKNOWN_PROTOCOLS||!1,Dt=!1!==t.ALLOW_SELF_CLOSE_IN_ATTR,Mt=t.SAFE_FOR_TEMPLATES||!1,zt=!1!==t.SAFE_FOR_XML,Ut=t.WHOLE_DOCUMENT||!1,Bt=t.RETURN_DOM||!1,Wt=t.RETURN_DOM_FRAGMENT||!1,Gt=t.RETURN_TRUSTED_TYPE||!1,Ht=t.FORCE_BODY||!1,qt=!1!==t.SANITIZE_DOM,jt=t.SANITIZE_NAMED_PROPS||!1,$t=!1!==t.KEEP_CONTENT,Xt=t.IN_PLACE||!1,Tt=t.ALLOWED_URI_REGEXP||V,ne=t.NAMESPACE||re,ue=t.MATHML_TEXT_INTEGRATION_POINTS||ue,ce=t.HTML_INTEGRATION_POINTS||ce,Ct=t.CUSTOM_ELEMENT_HANDLING||{},t.CUSTOM_ELEMENT_HANDLING&&ye(t.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Ct.tagNameCheck=t.CUSTOM_ELEMENT_HANDLING.tagNameCheck),t.CUSTOM_ELEMENT_HANDLING&&ye(t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Ct.attributeNameCheck=t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),t.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(Ct.allowCustomizedBuiltInElements=t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Mt&&(Rt=!1),Wt&&(Bt=!0),Kt&&(Et=L({},B),Ft=[],!0===Kt.html&&(L(Et,D),L(Ft,W)),!0===Kt.svg&&(L(Et,M),L(Ft,G),L(Ft,j)),!0===Kt.svgFilters&&(L(Et,z),L(Ft,G),L(Ft,j)),!0===Kt.mathMl&&(L(Et,P),L(Ft,q),L(Ft,j))),t.ADD_TAGS&&(Et===St&&(Et=R(Et)),L(Et,t.ADD_TAGS,fe)),t.ADD_ATTR&&(Ft===Nt&&(Ft=R(Ft)),L(Ft,t.ADD_ATTR,fe)),t.ADD_URI_SAFE_ATTR&&L(te,t.ADD_URI_SAFE_ATTR,fe),t.FORBID_CONTENTS&&(Jt===Vt&&(Jt=R(Jt)),L(Jt,t.FORBID_CONTENTS,fe)),$t&&(Et["#text"]=!0),Ut&&L(Et,["html","head","body"]),Et.table&&(L(Et,["tbody"]),delete kt.tbody),t.TRUSTED_TYPES_POLICY){if("function"!=typeof t.TRUSTED_TYPES_POLICY.createHTML)throw N('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof t.TRUSTED_TYPES_POLICY.createScriptURL)throw N('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');Q=t.TRUSTED_TYPES_POLICY,et=Q.createHTML("")}else void 0===Q&&(Q=ut(O,a)),null!==Q&&"string"==typeof et&&(et=Q.createHTML(""));c&&c(t),ge=t}},ve=L({},[...M,...z,...U]),_e=L({},[...P,...H]),Ae=function(t){let e=Z(t);e&&e.tagName||(e={namespaceURI:ne,tagName:"template"});const o=v(t.tagName),i=v(e.tagName);return!!se[t.namespaceURI]&&(t.namespaceURI===ie?e.namespaceURI===re?"svg"===o:e.namespaceURI===oe?"svg"===o&&("annotation-xml"===i||ue[i]):Boolean(ve[o]):t.namespaceURI===oe?e.namespaceURI===re?"math"===o:e.namespaceURI===ie?"math"===o&&ce[i]:Boolean(_e[o]):t.namespaceURI===re?!(e.namespaceURI===ie&&!ce[i])&&(!(e.namespaceURI===oe&&!ue[i])&&(!_e[o]&&(de[o]||!ve[o]))):!("application/xhtml+xml"!==pe||!se[t.namespaceURI]))},xe=function(t){y(o.removed,{element:t});try{Z(t).removeChild(t)}catch(e){X(t)}},Te=function(t,e){try{y(o.removed,{attribute:e.getAttributeNode(t),from:e})}catch(t){y(o.removed,{attribute:null,from:e})}if(e.removeAttribute(t),"is"===t)if(Bt||Wt)try{xe(e)}catch(t){}else try{e.setAttribute(t,"")}catch(t){}},Ee=function(t){let e=null,o=null;if(Ht)t="<remove></remove>"+t;else{const e=A(t,/^[\r\n\t ]+/);o=e&&e[0]}"application/xhtml+xml"===pe&&ne===re&&(t='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+t+"</body></html>");const r=Q?Q.createHTML(t):t;if(ne===re)try{e=(new k).parseFromString(r,pe)}catch(t){}if(!e||!e.documentElement){e=ct.createDocument(ne,"template",null);try{e.documentElement.innerHTML=ae?et:r}catch(t){}}const n=e.body||e.documentElement;return t&&o&&n.insertBefore(i.createTextNode(o),n.childNodes[0]||null),ne===re?ht.call(e,Ut?"html":"body")[0]:Ut?e.documentElement:n},Se=function(t){return dt.call(t.ownerDocument||t,t,h.SHOW_ELEMENT|h.SHOW_COMMENT|h.SHOW_TEXT|h.SHOW_PROCESSING_INSTRUCTION|h.SHOW_CDATA_SECTION,null)},Fe=function(t){return t instanceof C&&("string"!=typeof t.nodeName||"string"!=typeof t.textContent||"function"!=typeof t.removeChild||!(t.attributes instanceof m)||"function"!=typeof t.removeAttribute||"function"!=typeof t.setAttribute||"string"!=typeof t.namespaceURI||"function"!=typeof t.insertBefore||"function"!=typeof t.hasChildNodes)},Ne=function(t){return"function"==typeof u&&t instanceof u};function Ce(t,e,i){f(t,(t=>{t.call(o,e,i,ge)}))}const ke=function(t){let e=null;if(Ce(ft.beforeSanitizeElements,t,null),Fe(t))return xe(t),!0;const i=fe(t.nodeName);if(Ce(ft.uponSanitizeElement,t,{tagName:i,allowedTags:Et}),t.hasChildNodes()&&!Ne(t.firstElementChild)&&F(/<[/\w]/g,t.innerHTML)&&F(/<[/\w]/g,t.textContent))return xe(t),!0;if(t.nodeType===nt)return xe(t),!0;if(zt&&t.nodeType===at&&F(/<[/\w]/g,t.data))return xe(t),!0;if(!Et[i]||kt[i]){if(!kt[i]&&Oe(i)){if(Ct.tagNameCheck instanceof RegExp&&F(Ct.tagNameCheck,i))return!1;if(Ct.tagNameCheck instanceof Function&&Ct.tagNameCheck(i))return!1}if($t&&!Jt[i]){const e=Z(t)||t.parentNode,o=J(t)||t.childNodes;if(o&&e){for(let i=o.length-1;i>=0;--i){const r=$(o[i],!0);r.__removalCount=(t.__removalCount||0)+1,e.insertBefore(r,K(t))}}}return xe(t),!0}return t instanceof d&&!Ae(t)?(xe(t),!0):"noscript"!==i&&"noembed"!==i&&"noframes"!==i||!F(/<\/no(script|embed|frames)/i,t.innerHTML)?(Mt&&t.nodeType===rt&&(e=t.textContent,f([gt,wt,yt],(t=>{e=x(e,t," ")})),t.textContent!==e&&(y(o.removed,{element:t.cloneNode()}),t.textContent=e)),Ce(ft.afterSanitizeElements,t,null),!1):(xe(t),!0)},Le=function(t,e,o){if(qt&&("id"===e||"name"===e)&&(o in i||o in we))return!1;if(Rt&&!Lt[e]&&F(bt,e));else if(Ot&&F(vt,e));else if(!Ft[e]||Lt[e]){if(!(Oe(t)&&(Ct.tagNameCheck instanceof RegExp&&F(Ct.tagNameCheck,t)||Ct.tagNameCheck instanceof Function&&Ct.tagNameCheck(t))&&(Ct.attributeNameCheck instanceof RegExp&&F(Ct.attributeNameCheck,e)||Ct.attributeNameCheck instanceof Function&&Ct.attributeNameCheck(e))||"is"===e&&Ct.allowCustomizedBuiltInElements&&(Ct.tagNameCheck instanceof RegExp&&F(Ct.tagNameCheck,o)||Ct.tagNameCheck instanceof Function&&Ct.tagNameCheck(o))))return!1}else if(te[e]);else if(F(Tt,x(o,At,"")));else if("src"!==e&&"xlink:href"!==e&&"href"!==e||"script"===t||0!==T(o,"data:")||!Zt[t]){if(It&&!F(_t,x(o,At,"")));else if(o)return!1}else;return!0},Oe=function(t){return"annotation-xml"!==t&&A(t,xt)},Re=function(t){Ce(ft.beforeSanitizeAttributes,t,null);const{attributes:e}=t;if(!e||Fe(t))return;const i={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Ft,forceKeepAttr:void 0};let r=e.length;for(;r--;){const n=e[r],{name:a,namespaceURI:s,value:l}=n,u=fe(a);let c="value"===a?l:E(l);if(i.attrName=u,i.attrValue=c,i.keepAttr=!0,i.forceKeepAttr=void 0,Ce(ft.uponSanitizeAttribute,t,i),c=i.attrValue,!jt||"id"!==u&&"name"!==u||(Te(a,t),c=Yt+c),zt&&F(/((--!?|])>)|<\/(style|title)/i,c)){Te(a,t);continue}if(i.forceKeepAttr)continue;if(Te(a,t),!i.keepAttr)continue;if(!Dt&&F(/\/>/i,c)){Te(a,t);continue}Mt&&f([gt,wt,yt],(t=>{c=x(c,t," ")}));const d=fe(t.nodeName);if(Le(d,u,c)){if(Q&&"object"==typeof O&&"function"==typeof O.getAttributeType)if(s);else switch(O.getAttributeType(d,u)){case"TrustedHTML":c=Q.createHTML(c);break;case"TrustedScriptURL":c=Q.createScriptURL(c)}try{s?t.setAttributeNS(s,a,c):t.setAttribute(a,c),Fe(t)?xe(t):w(o.removed)}catch(t){}}}Ce(ft.afterSanitizeAttributes,t,null)},Ie=function t(e){let o=null;const i=Se(e);for(Ce(ft.beforeSanitizeShadowDOM,e,null);o=i.nextNode();)Ce(ft.uponSanitizeShadowNode,o,null),ke(o),Re(o),o.content instanceof s&&t(o.content);Ce(ft.afterSanitizeShadowDOM,e,null)};return o.sanitize=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=null,n=null,a=null,l=null;if(ae=!t,ae&&(t="\x3c!--\x3e"),"string"!=typeof t&&!Ne(t)){if("function"!=typeof t.toString)throw N("toString is not a function");if("string"!=typeof(t=t.toString()))throw N("dirty is not a string, aborting")}if(!o.isSupported)return t;if(Pt||be(e),o.removed=[],"string"==typeof t&&(Xt=!1),Xt){if(t.nodeName){const e=fe(t.nodeName);if(!Et[e]||kt[e])throw N("root node is forbidden and cannot be sanitized in-place")}}else if(t instanceof u)i=Ee("\x3c!----\x3e"),n=i.ownerDocument.importNode(t,!0),n.nodeType===it&&"BODY"===n.nodeName||"HTML"===n.nodeName?i=n:i.appendChild(n);else{if(!Bt&&!Mt&&!Ut&&-1===t.indexOf("<"))return Q&&Gt?Q.createHTML(t):t;if(i=Ee(t),!i)return Bt?null:Gt?et:""}i&&Ht&&xe(i.firstChild);const c=Se(Xt?t:i);for(;a=c.nextNode();)ke(a),Re(a),a.content instanceof s&&Ie(a.content);if(Xt)return t;if(Bt){if(Wt)for(l=pt.call(i.ownerDocument);i.firstChild;)l.appendChild(i.firstChild);else l=i;return(Ft.shadowroot||Ft.shadowrootmode)&&(l=mt.call(r,l,!0)),l}let d=Ut?i.outerHTML:i.innerHTML;return Ut&&Et["!doctype"]&&i.ownerDocument&&i.ownerDocument.doctype&&i.ownerDocument.doctype.name&&F(tt,i.ownerDocument.doctype.name)&&(d="<!DOCTYPE "+i.ownerDocument.doctype.name+">\n"+d),Mt&&f([gt,wt,yt],(t=>{d=x(d,t," ")})),Q&&Gt?Q.createHTML(d):d},o.setConfig=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};be(t),Pt=!0},o.clearConfig=function(){ge=null,Pt=!1},o.isValidAttribute=function(t,e,o){ge||be({});const i=fe(t),r=fe(e);return Le(i,r,o)},o.addHook=function(t,e){"function"==typeof e&&y(ft[t],e)},o.removeHook=function(t,e){if(void 0!==e){const o=g(ft[t],e);return-1===o?void 0:b(ft[t],o,1)[0]}return w(ft[t])},o.removeHooks=function(t){ft[t]=[]},o.removeAllHooks=function(){ft={afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}},o}();function ht(){var t=window.location;"about:srcdoc"==t.href&&(t=window.parent.location);var e={};return function(t,o,i){for(;i=o.exec(t);)e[decodeURIComponent(i[1])]=decodeURIComponent(i[2])}(t.search.substring(1).replace(/\+/g,"%20"),/([^&=]+)=?([^&]*)/g),e}function mt(){if(null==ct){var t=ht();ct="referrer"in t?/^https:\/\/medium.com\//.test(t.referrer):!("auto"in t)}return ct}function ft(t){var e=t||window.innerWidth;return e>999?650:e>599?575:400}function gt(t){if(t&&window.top!==window.self){var e=window;"srcdoc"==e.location.pathname&&(e=e.parent);var o={sender:"Flourish",method:"scrolly",captions:t.captions,hasScrollyTransformFix:t.hasScrollyTransformFix};e.parent.postMessage(JSON.stringify(o),"*")}}function wt(t,e){if(window.top!==window.self){var o=window;if("srcdoc"==o.location.pathname&&(o=o.parent),dt)return t=parseInt(t,10),void o.parent.postMessage({sentinel:"amp",type:"embed-size",height:t},"*");var i={sender:"Flourish",context:"iframe.resize",method:"resize",height:t,src:o.location.toString()};if(e)for(var r in e)i[r]=e[r];o.parent.postMessage(JSON.stringify(i),"*")}}function yt(){return(-1!==navigator.userAgent.indexOf("Safari")||-1!==navigator.userAgent.indexOf("iPhone"))&&-1==navigator.userAgent.indexOf("Chrome")}function bt(t){return"string"==typeof t||t instanceof String}function vt(t){return"warn"!==t.method?(console.warn("BUG: validateWarnMessage called for method"+t.method),!1):!(null!=t.message&&!bt(t.message))&&!(null!=t.explanation&&!bt(t.explanation))}function _t(t){return"resize"!==t.method?(console.warn("BUG: validateResizeMessage called for method"+t.method),!1):!!bt(t.src)&&(!!bt(t.context)&&!!("number"==typeof(e=t.height)?!isNaN(e)&&e>=0:bt(e)&&/\d/.test(e)&&/^[0-9]*(\.[0-9]*)?(cm|mm|Q|in|pc|pt|px|em|ex|ch|rem|lh|vw|vh|vmin|vmax|%)?$/i.test(e)));var e}function At(t){throw new Error("Validation for setSetting is not implemented yet; see issue #4328")}function xt(t){return"scrolly"!==t.method?(console.warn("BUG: validateScrolly called for method"+t.method),!1):!!Array.isArray(t.captions)}function Tt(t){return"customerAnalytics"===t.method||(console.warn("BUG: validateCustomerAnalyticsMessage called for method"+t.method),!1)}function Et(t){return"request-upload"!==t.method?(console.warn("BUG: validateResizeMessage called for method"+t.method),!1):!!bt(t.name)&&!(null!=t.accept&&!bt(t.accept))}function St(t,e,o){var i=function(t){for(var e={warn:vt,resize:_t,setSetting:At,customerAnalytics:Tt,"request-upload":Et,scrolly:xt},o={},i=0;i<t.length;i++){var r=t[i];if(!e[r])throw new Error("No validator found for method "+r);o[r]=e[r]}return o}(e);window.addEventListener("message",(function(e){var r=function(){if(e.origin==document.location.origin)return!0;if(o){const t=e.origin.toLowerCase();if(o=o.toLowerCase(),t.endsWith("//"+o))return!0;if(t.endsWith("."+o))return!0}return!!e.origin.match(/\/\/localhost:\d+$|\/\/(?:public|app)\.flourish.devlocal$|\/\/flourish-api\.com$|\.flourish\.(?:local(:\d+)?|net|rocks|studio)$|\.uri\.sh$|\/\/flourish-user-templates\.com$/)}();if(null!=e.source&&r){var n;try{n="object"==typeof e.data?e.data:JSON.parse(e.data)}catch(t){return void console.warn("Unexpected non-JSON message: "+JSON.stringify(e.data))}if("Flourish"===n.sender)if(n.method)if(Object.prototype.hasOwnProperty.call(i,n.method))if(i[n.method](n)){for(var a=document.querySelectorAll("iframe"),s=0;s<a.length;s++)if(a[s].contentWindow==e.source||a[s].contentWindow==e.source.parent)return void t(n,a[s]);console.warn("could not find frame",n)}else console.warn("Validation failed for the message",n);else console.warn("No validator implemented for message",n);else console.warn("The 'method' property was missing from message",n)}})),yt()&&(window.addEventListener("resize",Ft),Ft())}function Ft(){for(var t=document.querySelectorAll(".flourish-embed"),e=0;e<t.length;e++){var o=t[e];if(!o.getAttribute("data-width")){var i=o.querySelector("iframe");if(i){var r=window.getComputedStyle(o),n=o.offsetWidth-parseFloat(r.paddingLeft)-parseFloat(r.paddingRight);i.style.width=n+"px"}}}}function Nt(t,e,o){var i=t.parentNode;if(i.classList.contains("fl-scrolly-wrapper"))return void console.warn("createScrolly is being called more than once per story. This should not happen.");i.classList.add("fl-scrolly-wrapper"),i.style.position="relative",i.style.paddingBottom="1px",i.style.transform="translate3d(0, 0, 0)";const r=navigator.platform.indexOf("Win")>-1,n=!!window.chrome&&(navigator.userAgent.indexOf("Chrome")>-1||navigator.userAgent.indexOf("Edg")>-1||navigator.userAgent.indexOf("OPR")>-1);if(r&&n&&o){let t,e=0;window.addEventListener("scroll",(function(){clearTimeout(t),t=setTimeout((()=>{e=0===e?1:0,i.style.transform=`translateZ(${e}px)`}),100)}))}t.style.position="sticky";var a=i.getAttribute("data-height")||null;a||(a="80vh",t.style.height=a),t.style.top="calc(50vh - "+a+"/2)";var s=i.querySelector(".flourish-credit");s&&(s.style.position="sticky",s.style.top="calc(50vh + "+a+"/2)"),e.forEach((function(t,e){var o="string"==typeof t&&""!=t.trim(),r=document.createElement("div");r.setAttribute("data-slide",e),r.classList.add("fl-scrolly-caption"),r.style.position="relative",r.style.transform="translate3d(0,0,0)",r.style.textAlign="center",r.style.maxWidth="500px",r.style.height="auto",r.style.marginTop="0",r.style.marginBottom=o?"100vh":"50vh",r.style.marginLeft="auto",r.style.marginRight="auto";var n=document.createElement("div");n.innerHTML=pt.sanitize(t,{ADD_ATTR:["target"]}),n.style.visibility=o?"":"hidden",n.style.display="inline-block",n.style.paddingTop="1.25em",n.style.paddingRight="1.25em",n.style.paddingBottom="1.25em",n.style.paddingLeft="1.25em",n.style.background="rgba(255,255,255,0.9)",n.style.boxShadow="0px 0px 10px rgba(0,0,0,0.2)",n.style.borderRadius="10px",n.style.textAlign="center",n.style.maxWidth="100%",n.style.margin="0 20px",n.style.overflowX="hidden",r.appendChild(n),i.appendChild(r)})),function(t){for(var e=new IntersectionObserver((function(e){e.forEach((function(e){if(e.isIntersecting){var o=t.querySelector("iframe");o&&(o.src=o.src.replace(/#slide-.*/,"")+"#slide-"+e.target.getAttribute("data-slide"))}}))}),{rootMargin:"0px 0px -0% 0px"}),o=t.querySelectorAll(".fl-scrolly-caption"),i=0;i<o.length;i++)e.observe(o[i]);t.querySelectorAll(".fl-scrolly-caption img").forEach((function(t){t.style.maxWidth="100%"}))}(i)}function Ct(t,e,o,i,r){var n=document.createElement("iframe");if(n.setAttribute("scrolling","no"),n.setAttribute("frameborder","0"),n.setAttribute("title","Interactive or visual content"),n.setAttribute("sandbox","allow-same-origin allow-forms allow-scripts allow-downloads allow-popups allow-popups-to-escape-sandbox allow-top-navigation-by-user-activation"),e.appendChild(n),n.offsetParent||"fixed"===getComputedStyle(n).position)kt(t,e,n,o,i,r);else{var a={embed_url:t,container:e,iframe:n,width:o,height:i,play_on_load:r};if(window._flourish_poll_items?window._flourish_poll_items.push(a):window._flourish_poll_items=[a],window._flourish_poll_items.length>1)return n;var s=setInterval((function(){window._flourish_poll_items=window._flourish_poll_items.filter((function(t){return!t.iframe.offsetParent||(kt(t.embed_url,t.container,t.iframe,t.width,t.height,t.play_on_load),!1)})),window._flourish_poll_items.length||clearInterval(s)}),500)}return n}function kt(t,e,o,i,r,n){var a;return i&&"number"==typeof i?(a=i,i+="px"):i&&i.match(/^[ \t\r\n\f]*([+-]?\d+|\d*\.\d+(?:[eE][+-]?\d+)?)(?:\\?[Pp]|\\0{0,4}[57]0(?:\r\n|[ \t\r\n\f])?)(?:\\?[Xx]|\\0{0,4}[57]8(?:\r\n|[ \t\r\n\f])?)[ \t\r\n\f]*$/)&&(a=parseFloat(i)),r&&"number"==typeof r&&(r+="px"),i?o.style.width=i:yt()?o.style.width=e.offsetWidth+"px":o.style.width="100%",!!r||(t.match(/\?/)?t+="&auto=1":t+="?auto=1",r=ft(a||o.offsetWidth)+"px"),r&&("%"===r.charAt(r.length-1)&&(r=parseFloat(r)/100*e.parentNode.offsetHeight+"px"),o.style.height=r),o.setAttribute("src",t+(n?"#play-on-load":"")),o}var Lt={de:{credits:{default:"Erstellt mit Flourish"}},en:{credits:{default:{text:"A Flourish data visualization",url:"https://flourish.studio/"},annotator:{text:"Interactive content by Flourish",url:"https://app.flourish.studio/@flourish/svg-annotator"},"bar-chart-race":{text:"A Flourish bar chart race",url:"https://flourish.studio/visualisations/bar-chart-race/"},"bubble-chart":{text:"A Flourish bubble chart",url:"https://flourish.studio/blog/introducing-bubble-chart-template/"},cards:{text:"Interactive content by Flourish",url:"https://flourish.studio/blog/cards-template/"},chart:{text:"A Flourish chart",url:"https://flourish.studio/visualisations/line-bar-pie-charts/"},chord:{text:"A Flourish chord diagram",url:"https://flourish.studio/blog/how-to-make-a-chord-diagram/"},countdown:{text:"Interactive content by Flourish",url:"https://flourish.studio/blog/number-ticker-countdown-templates/"},"data-explorer":{text:"A Flourish data explorer",url:"https://flourish.studio/blog/data-explorer-template/"},draw:{text:"Interactive content by Flourish",url:"https://flourish.studio/blog/draw-the-line-chart/"},election:{text:"A Flourish election chart",url:"https://app.flourish.studio/@flourish/election-results-chart"},gantt:{text:"A Flourish gantt chart",url:"https://flourish.studio/blog/gantt-chart-template/"},gauge:{text:"A Flourish gauge visualization",url:"https://flourish.studio/visualisations/gauge/"},globe:{text:"A Flourish connections globe",url:"https://flourish.studio/visualisations/maps/"},heatmap:{text:"A Flourish heatmap",url:"https://flourish.studio/visualisations/heatmaps/"},hierarchy:{text:"A Flourish hierarchy chart",url:"https://flourish.studio/visualisations/treemaps/"},map:{text:"A Flourish map",url:"https://flourish.studio/visualisations/maps/"},marimekko:{text:"A Flourish marimekko chart",url:"https://flourish.studio/visualisations/marimekko-charts/"},model:{text:"Interactive content by Flourish",url:"https://app.flourish.studio/@flourish/3d-viewer"},network:{text:"A Flourish network chart",url:"https://flourish.studio/visualisations/network-charts/"},"number-ticker":{text:"Interactive content by Flourish",url:"https://flourish.studio/blog/number-ticker-countdown-templates/"},parliament:{text:"A Flourish election chart",url:"https://flourish.studio/blog/how-to-make-parliament-chart/"},"photo-slider":{text:"Interactive content by Flourish",url:"https://app.flourish.studio/@flourish/photo-slider"},pictogram:{text:"A Flourish pictogram",url:"https://flourish.studio/blog/pictogram-isotype/"},quiz:{text:"A Flourish quiz",url:"https://app.flourish.studio/@flourish/quiz"},radar:{text:"A Flourish radar chart",url:"https://flourish.studio/blog/create-online-radar-spider-charts/"},ranking:{text:"A Flourish line chart race",url:"https://flourish.studio/blog/line-chart-race-updates/"},sankey:{text:"A Flourish sankey chart",url:"https://flourish.studio/visualisations/sankey-charts/"},scatter:{text:"A Flourish scatter chart",url:"https://flourish.studio/visualisations/scatter-charts/"},slope:{text:"A Flourish slope chart",url:"https://flourish.studio/visualisations/slope-charts/"},sports:{text:"A Flourish sports visualization",url:"https://app.flourish.studio/@flourish/sports-race"},survey:{text:"A Flourish survey visualization",url:"https://flourish.studio/visualisations/survey-data/"},table:{text:"A Flourish table",url:"https://flourish.studio/visualisations/create-a-table/"},timeline:{text:"Interactive content by Flourish",url:"https://flourish.studio/blog/responsive-interactive-timeline/"},"text-annotator":{text:"Interactive content by Flourish",url:"https://flourish.studio/blog/text-annotator-template/"},tournament:{text:"Interactive content by Flourish",url:"https://flourish.studio/visualisations/tournament-chart/"},"word-cloud":{text:"A Flourish data visualization",url:"https://flourish.studio/blog/online-wordcloud-custom-fonts/"}}},es:{credits:{default:"Creado con Flourish",bar_race:{text:"Creado con Flourish",url:"https://flourish.studio/visualisations/bar-chart-race/"},"bar-chart-race":{text:"Creado con Flourish",url:"https://flourish.studio/visualisations/bar-chart-race/"}}},fr:{credits:{default:"Créé avec Flourish",bar_race:{text:"Créé avec Flourish",url:"https://flourish.studio/visualisations/bar-chart-race/"},"bar-chart-race":{text:"Créé avec Flourish",url:"https://flourish.studio/visualisations/bar-chart-race/"}}},it:{credits:{default:"Creato con Flourish",bar_race:{text:"Creato con Flourish",url:"https://flourish.studio/visualisations/bar-chart-race/"},"bar-chart-race":{text:"Creato con Flourish",url:"https://flourish.studio/visualisations/bar-chart-race/"}}},mi:{credits:{default:"Hangaia ki te Flourish",bar_race:{text:"Hangaia ki te Flourish",url:"https://flourish.studio/visualisations/bar-chart-race/"},"bar-chart-race":{text:"Hangaia ki te Flourish",url:"https://flourish.studio/visualisations/bar-chart-race/"}}},nl:{credits:{default:"Gemaakt met Flourish",bar_race:{text:"Gemaakt met Flourish",url:"https://flourish.studio/visualisations/bar-chart-race/"},"bar-chart-race":{text:"Gemaakt met Flourish",url:"https://flourish.studio/visualisations/bar-chart-race/"}}},pt:{default:"Feito com Flourish",bar_race:{text:"Feito com Flourish",url:"https://flourish.studio/visualisations/bar-chart-race/"},"bar-chart-race":{text:"Feito com Flourish",url:"https://flourish.studio/visualisations/bar-chart-race/"}}};!function(){var t;(t=ht()._sp||null)&&window.sp&&(document.cookie="_sp="+t+"; path=/; max-age=31536000; SameSite=None; Secure");var n=[];function a(){if(!window.FlourishLoaded){window.FlourishLoaded=!0;var t=window.Flourish&&window.Flourish.external,i="en",a=document.querySelector("meta[name='language'],meta[name='LANGUAGE']");a&&a.hasAttribute("content")&&(i=a.getAttribute("content").substr(0,2),Lt[i]||(i="en"));var s,l=Array.prototype.slice.call(document.querySelectorAll(".flourish-embed"));if(!t)for(var u=document.querySelectorAll("script"),c=0;c<u.length;c++){var d=u[c];if(d.src&&d.src.match(/(?:\.flourish\.(?:net|rocks|studio)|(?:localhost|flourish\.local)(?::\d+)?)\//g)&&d.src.match(/\/embed\.js$/)){if(!s){var p=d.getAttribute("src");s=p.substr(0,p.lastIndexOf("/resources"))+"/"}if(d.getAttribute("data-src")){var h=document.createElement("div");h.setAttribute("class","flourish-embed"),h.setAttribute("data-src",d.getAttribute("data-src")),d.getAttribute("data-height")&&h.setAttribute("data-height",d.getAttribute("data-height")),d.getAttribute("data-width")&&h.setAttribute("data-width",d.getAttribute("data-width")),d.parentNode.insertBefore(h,d),l.push(h)}}}var m=(dt="#amp=1"==window.location.hash,{createEmbedIframe:Ct,isFixedHeight:mt,getHeightForBreakpoint:ft,startEventListeners:St,notifyParentWindow:wt,initScrolly:gt,createScrolly:Nt,isSafari:yt,initCustomerAnalytics:r,addAnalyticsListener:o,sendCustomerAnalyticsMessage:e}),f=function(e){var o,r,n,a=e.getAttribute("data-src");if(a){var l,u=a.split("?"),c=u.length>1||window.Flourish&&window.Flourish.hide;if(a=u[0],t)l=a,o=window.FlourishConfig.public_url,r="?utm_source=embed&utm_campaign="+a;else{l=(n=0===a.indexOf("template/"))?window.FlourishConfig.app_url+"/"+a+"/preview":window.FlourishConfig.embeds_url+a+"/embed",o=s+a+"/",r="?utm_source=showcase&utm_campaign="+a;var d=ht()._sp||null;d&&(r+="&_sp="+d)}if(m.createEmbedIframe(l,e,e.getAttribute("data-width"),e.getAttribute("data-height"),e.hasAttribute("data-play-on-load")),!n&&!c){for(var p="",h=e.className.split(" "),f=0;f<h.length;f++)if("flourish-embed"!=h[f]&&0==h[f].indexOf("flourish-")){p=h[f].substr(9);break}p||(p=0==a.indexOf("story")?"story":"default");var g=function(t,e){var o,i;return e=e||"","object"==typeof(o=Lt[t=t||"en"].credits[e]||Lt.en.credits[e]||Lt.en.credits.default)&&(o.url&&(i=o.url),o=o.text),{credit_text:o,credit_url:i}}(i,p),w=function(t,e,o,i){t=t||"https://flourish.studio",e=e||"?utm_source=api&utm_campaign="+window.location.href,o=o||"https://public.flourish.studio/",i=i||"A Flourish data visualization";var r=document.createElement("div");r.setAttribute("class","flourish-credit"),r.setAttribute("style","width:100%!important;margin:0 0 4px!important;text-align:right!important;font-family:Helvetica,sans-serif!important;color:#888!important;font-size:11px!important;font-weight:bold!important;font-style:normal!important;-webkit-font-smoothing:antialiased!important;box-shadow:none!important;");var n=document.createElement("a");n.setAttribute("href",t+e),n.setAttribute("target","_top"),n.setAttribute("style","display:inline-block!important;text-decoration:none!important;font:inherit!important;color:inherit!important;border:none!important;margin:0 5px!important;box-shadow:none!important;"),r.appendChild(n);var a=document.createElement("img");a.setAttribute("alt","Flourish logo"),a.setAttribute("src",o+"resources/bosh.svg"),a.setAttribute("style","font:inherit!important;width:auto!important;height:12px!important;border:none!important;margin:0 2px 0!important;vertical-align:middle!important;display:inline-block!important;box-shadow:none!important;"),n.appendChild(a);var s=document.createElement("span");return s.setAttribute("style","font:inherit!important;color:#888!important;vertical-align:middle!important;display:inline-block!important;box-shadow:none!important;"),s.appendChild(document.createTextNode(i)),n.appendChild(s),r}(g.credit_url||o,r,window.FlourishConfig.public_url,g.credit_text);e.appendChild(w)}}};if(!window.Flourish||!window.Flourish.disable_autoload)for(c=0;c<l.length;c++)f(l[c]);m.startEventListeners((function(t,e){if("resize"==t.method){var o=t.height,i=typeof o;("number"===i||"string"===i&&!isNaN(o))&&(t.height+="px"),e.style.height=t.height}else"customerAnalytics"===t.method?(delete t.method,delete t.sender,function(t){window.Flourish&&window.Flourish._analytics_listeners.forEach((function(e){e(t)}))}(t)):"scrolly"===t.method&&m.createScrolly(e,t.captions,t.hasScrollyTransformFix)}),["resize","customerAnalytics","scrolly"],window.Flourish&&window.Flourish.embed_domain);for(c=0;c<n.length;c++)f(n[c]);window.Flourish&&(window.Flourish.loadEmbed=f)}}window.Flourish&&(window.Flourish.loadEmbed=function(t){n.push(t)},window.Flourish.addAnalyticsListener=o,window.Flourish.removeAnalyticsListener=i,window.Flourish._analytics_listeners||(window.Flourish._analytics_listeners=[])),"loading"===document.readyState?document.addEventListener("DOMContentLoaded",a):a()}()}();
//# sourceMappingURL=embed.js.map
