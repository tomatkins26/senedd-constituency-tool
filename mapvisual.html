<!DOCTYPE html>
<html lang="en">
<head><meta charset="UTF-8" /><title>Test Simple GeoJSON SVG</title></head>
<body>
<svg id="map" width="600" height="400" style="border:1px solid #ccc;">
  <g id="content"></g>
</svg>
<script>
  const svg = document.getElementById('map');
  const content = document.getElementById('content');
  const width = svg.clientWidth;
  const height = svg.clientHeight;

  // Simple GeoJSON with one square polygon
  const data = {
    "type": "FeatureCollection",
    "features": [{
      "type": "Feature",
      "properties": {"name": "Test Area"},
      "geometry": {
        "type": "Polygon",
        "coordinates": [[
          [-1, 51],
          [-1, 52],
          [0, 52],
          [0, 51],
          [-1, 51]
        ]]
      }
    }]
  };

  // Calculate bounds
  let lons = [], lats = [];
  data.features.forEach(f => f.geometry.coordinates[0].forEach(([lon,lat]) => {
    lons.push(lon); lats.push(lat);
  }));
  const lonMin = Math.min(...lons);
  const lonMax = Math.max(...lons);
  const latMin = Math.min(...lats);
  const latMax = Math.max(...lats);

  // Scale and offset
  const geoWidth = lonMax - lonMin;
  const geoHeight = latMax - latMin;
  const scaleX = width / geoWidth;
  const scaleY = height / geoHeight;
  const scale = Math.min(scaleX, scaleY);
  const offsetX = (width - geoWidth * scale) / 2;
  const offsetY = (height - geoHeight * scale) / 2;

  function project([lon, lat]) {
    const x = (lon - lonMin) * scale + offsetX;
    const y = height - ((lat - latMin) * scale + offsetY);
    return [x, y];
  }

  function createPath(coords) {
    return coords.map(point => {
      const [x, y] = project(point);
      return `${x},${y}`;
    }).join(' ');
  }

  data.features.forEach(feature => {
    const coords = feature.geometry.coordinates[0];
    const path = document.createElementNS('http://www.w3.org/2000/svg', 'polygon');
    path.setAttribute('points', createPath(coords));
    path.setAttribute('fill', '#002D72');
    path.setAttribute('stroke', 'white');
    path.setAttribute('stroke-width', 2);
    path.addEventListener('mouseover', () => {
      path.setAttribute('fill', '#E4002B');
    });
    path.addEventListener('mouseout', () => {
      path.setAttribute('fill', '#002D72');
    });
    content.appendChild(path);
  });
</script>
</body>
</html>
